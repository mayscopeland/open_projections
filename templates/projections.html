{% extends 'base.html' %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/sortable.css') }}">
{% endblock %}

{% block content %}
<section class="section">
  <div class="container">
    <h1 class="title">Open Projections for {{ selected_date.strftime('%Y-%m-%d') }}</h1>
    <div class="select mb-3">
      <select id="dateSelect" onchange='location = "/projections/" + this.value;'>
        {% for d in dates %}
        <option value="{{d.strftime('%Y-%m-%d')}}"
          {% if d == selected_date %}selected="selected"{% endif %}>
          {{d.strftime('%Y-%m-%d')}}
        </option>
        {% endfor %}
      </select>
    </div>
    <div class="tabs is-boxed is-medium">
      <ul>
        <li class="is-active" id="tabBatting"><a>Batting</a></li>
        <li id="tabPitching"><a>Pitching</a></li>
      </ul>
    </div>
    
    <div class="table-container" id="divBatting">
      <a href="/projections/{{selected_date.strftime('%Y-%m-%d')}}?csv=batting" class="button is-primary mb-3">Export to CSV</a>
      {{ batting|safe }}
    </div>
    
    <div class="table-container is-hidden" id="divPitching">
      <a href="/projections/{{selected_date.strftime('%Y-%m-%d')}}?csv=pitching" class="button is-primary mb-3">Export to CSV</a>
      {{ pitching|safe }}
    </div>
   

  </div>
</section>
<script src="{{ url_for('static', filename='js/sortable.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/script.js') }}"></script>
<script>

  function showBatting() {
    document.getElementById('divBatting').classList.remove("is-hidden")
    document.getElementById('divPitching').classList.add("is-hidden")

    document.getElementById('tabBatting').classList.add("is-active")
    document.getElementById('tabPitching').classList.remove("is-active")
  }

  function showPitching() {
    document.getElementById('divBatting').classList.add("is-hidden")
    document.getElementById('divPitching').classList.remove("is-hidden") 
    
    document.getElementById('tabBatting').classList.remove("is-active")
    document.getElementById('tabPitching').classList.add("is-active")
  }

  window.onload = function() {
    document.getElementById("tabBatting").onclick = function() {
      showBatting();
      return false;
    }
      
    document.getElementById("tabPitching").onclick = function() {
      showPitching();
      return false;
    }
  }

</script>
{% endblock %}